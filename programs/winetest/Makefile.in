TOPSRCDIR = @top_srcdir@
TOPOBJDIR = ../..
SRCDIR    = @srcdir@
VPATH     = @srcdir@
MODULE    = winetest.exe
APPMODE   = cui
IMPORTS   = kernel32

EXTRACFLAGS = `perl -MExtUtils::Embed -e ccflags`
EXTRALIBS   = `perl -MExtUtils::Embed -e ldopts`
EXTRAINCL   = `perl -MExtUtils::Embed -e perl_inc`
XSUBPPDIR   = `perl -MConfig -e 'print $$Config::Config{privlibexp}'`/ExtUtils

C_SRCS = winetest.c

EXTRA_OBJS = wine.o

EXTRASUBDIRS = include tests

PLTESTPROGRAM = $(MODULE)$(DLLEXT)

PLTESTS = \
	tests/wine.pl

# override all: target so that we don't build the Perl stuff by default
empty-target:

@MAKE_PROG_RULES@

wine.c: wine.xs
	perl $(XSUBPPDIR)/xsubpp -typemap $(XSUBPPDIR)/typemap $(SRCDIR)/wine.xs >wine.c || $(RM) wine.c

clean::
	$(RM) wine.c

.PHONY: empty-target

### Dependencies:
