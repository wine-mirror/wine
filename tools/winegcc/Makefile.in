DEFS = \
	-DINCLUDEDIR="\"$(includedir)\"" \
	-DDLLDIR="\"$(dlldir)\"" \
	-DLIBDIR="\"$(libdir)\"" \
	-DDLLFLAGS="\"@DLLFLAGS@\"" \
	-DLDDLLFLAGS="\"@LDDLLFLAGS@\"" \
	-DCC="\"$(CC)\"" \
	-DCPP="\"@CPPBIN@\"" \
	-DCXX="\"$(CXX)\"" \
	-DLD="\"$(LD)\"" \
	-DPRELINK="\"$(PRELINK)\""

TOPSRCDIR = @top_srcdir@
TOPOBJDIR = ../..
SRCDIR    = @srcdir@
VPATH     = @srcdir@
EXEEXT    = @EXEEXT@
MODULE    = none

PROGRAMS = \
	winecpp$(EXEEXT) \
	winegcc$(EXEEXT) \
	wineg++$(EXEEXT)

C_SRCS = \
	utils.c \
	winegcc.c

all: $(PROGRAMS)

@MAKE_RULES@

winegcc$(EXEEXT): winegcc.o utils.o
	$(CC) $(CFLAGS) -o $@ winegcc.o utils.o $(LIBPORT)

winecpp$(EXEEXT) wineg++$(EXEEXT): winegcc$(EXEEXT)
	$(RM) $@ && $(LN_S) winegcc$(EXEEXT) $@

install:: $(PROGRAMS)
	$(MKINSTALLDIRS) $(bindir) $(mandir)/man$(prog_manext)
	$(INSTALL_PROGRAM) winegcc$(EXEEXT) $(bindir)/winegcc$(EXEEXT)
	cd $(bindir) && $(RM) wineg++$(EXEEXT) && $(LN_S) winegcc$(EXEEXT) wineg++$(EXEEXT)
	cd $(bindir) && $(RM) winecpp$(EXEEXT) && $(LN_S) winegcc$(EXEEXT) winecpp$(EXEEXT)
	$(INSTALL_DATA) $(SRCDIR)/winegcc.man $(mandir)/man$(prog_manext)/winegcc.$(prog_manext)
	cd $(mandir)/man$(prog_manext) && $(RM) wineg++.$(prog_manext) && $(LN_S) winegcc.$(prog_manext) wineg++.$(prog_manext)

uninstall::
	$(RM) $(bindir)/winegcc$(EXEEXT) $(bindir)/wineg++$(EXEEXT) $(bindir)/winecpp$(EXEEXT) \
	      $(mandir)/man$(prog_manext)/winegcc.$(prog_manext) $(mandir)/man$(prog_manext)/wineg++.$(prog_manext)

### Dependencies:
